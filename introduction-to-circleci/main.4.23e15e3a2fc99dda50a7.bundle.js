(window.webpackJsonp=window.webpackJsonp||[]).push([[4],[,,,,,,,,,,function(e,t,n){e.exports=n.p+"22a00b39dbb9c17decd2995aafcbbda0.webp"},function(e,t,n){e.exports=n.p+"d8ba6e41538dbb1be341d5ab42ba4dbf.webp"},function(e,t,n){e.exports=n.p+"6c646a02115e8276d71942d75ba73169.webp"},function(e,t,n){e.exports=n.p+"4d171775847180d4d1cfeca6028026c7.webp"},function(e,t,n){e.exports=n.p+"de802ae92aae61304904ae8c23ca8d9f.webp"},,,,function(e,t,n){n(19),n(50),e.exports=n(47)},,,,,,,,,,,,,,,,,,function(e,t,n){var a={"./0-title.md":37,"./01-self-introduction.md":38,"./02-outline.md":39,"./03-argument.md":40,"./04-case1.md":41,"./05-case2.md":42,"./06-case3.md":43,"./07-conclusion.md":44,"./08-hiring.md":45,"./09-end.md":46};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=36},function(e,t,n){"use strict";n.r(t),n.d(t,"slides",(function(){return i})),n.d(t,"fusumaProps",(function(){return s})),n.d(t,"default",(function(){return b}));var a=n(2),r=n.n(a),o=n(1);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=[function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h1",null,"Introduction to CircleCI@Ginza.js#7"))}],s=[{classes:"title",note:""}],u={slides:i},p="wrapper";function b(e){var t=e.components,n=c(e,["components"]);return Object(o.a)(p,l({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.a)("h1",null,"Introduction to CircleCI@Ginza.js#7"))}b.isMDXComponent=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"slides",(function(){return i})),n.d(t,"fusumaProps",(function(){return s})),n.d(t,"default",(function(){return b}));var a=n(2),r=n.n(a),o=n(1);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=[function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("section",null,Object(o.a)("h2",null,"üí™"," ME ","üí™"),Object(o.a)("br",null),Object(o.a)("div",{className:"profile"},Object(o.a)("img",{src:"https://s.gravatar.com/avatar/83e73331a769d5af2859681fbec1d9b2?size=200&default=retro",alt:"profile",className:"profile-avatar"}),Object(o.a)("h4",{className:"profile-name"},"Ota Naoto"),Object(o.a)("div",{className:"sns-list"},Object(o.a)("div",{className:"sns-list"},Object(o.a)("a",{href:"https://twitter.com/azawakh_d",target:"_blank"},Object(o.a)("i",{className:"fab fa-twitter"})),Object(o.a)("a",{href:"https://github.com/azawakh",target:"_blank"},Object(o.a)("i",{className:"fab fa-github"})))),Object(o.a)("div",{className:"profile-info"},Object(o.a)("p",null,"A frontend engineer"),Object(o.a)("p",null,"Kakaku.com, Inc"),Object(o.a)("p",null,Object(o.a)("img",{src:"https://tblg.k-img.com/images/restaurant/logo/logo_tabelog_white.svg?1547477433",alt:"Tabelog"}))))))}],s=[{classes:"profile"}],u={slides:i},p="wrapper";function b(e){var t=e.components,n=c(e,["components"]);return Object(o.a)(p,l({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.a)("section",null,Object(o.a)("h2",null,"üí™"," ME ","üí™"),Object(o.a)("br",null),Object(o.a)("div",{className:"profile"},Object(o.a)("img",{src:"https://s.gravatar.com/avatar/83e73331a769d5af2859681fbec1d9b2?size=200&default=retro",alt:"profile",className:"profile-avatar"}),Object(o.a)("h4",{className:"profile-name"},"Ota Naoto"),Object(o.a)("div",{className:"sns-list"},Object(o.a)("div",{className:"sns-list"},Object(o.a)("a",{href:"https://twitter.com/azawakh_d",target:"_blank"},Object(o.a)("i",{className:"fab fa-twitter"})),Object(o.a)("a",{href:"https://github.com/azawakh",target:"_blank"},Object(o.a)("i",{className:"fab fa-github"})))),Object(o.a)("div",{className:"profile-info"},Object(o.a)("p",null,"A frontend engineer"),Object(o.a)("p",null,"Kakaku.com, Inc"),Object(o.a)("p",null,Object(o.a)("img",{src:"https://tblg.k-img.com/images/restaurant/logo/logo_tabelog_white.svg?1547477433",alt:"Tabelog"}))))))}b.isMDXComponent=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"slides",(function(){return i})),n.d(t,"fusumaProps",(function(){return s})),n.d(t,"default",(function(){return b}));var a=n(2),r=n.n(a),o=n(1);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=[function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h2",null,"Outline"),Object(o.a)("ol",null,Object(o.a)("li",{parentName:"ol"},"Argument: Using CircleCI in Frontend Development is very effortless and efficient"),Object(o.a)("li",{parentName:"ol"},"CASE1: Automated storybook deployment to AWS S3"),Object(o.a)("li",{parentName:"ol"},"CASE2: Support for checking the image of the changed component on Pull Request"),Object(o.a)("li",{parentName:"ol"},"CASE3: Api spec document deployment and checking on the PR"),Object(o.a)("li",{parentName:"ol"},"Conclusion: You should now enable CircleCI or other CI tools integration to your repository")))}],s=[{classes:"title outline",note:""}],u={slides:i},p="wrapper";function b(e){var t=e.components,n=c(e,["components"]);return Object(o.a)(p,l({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.a)("h2",null,"Outline"),Object(o.a)("ol",null,Object(o.a)("li",{parentName:"ol"},"Argument: Using CircleCI in Frontend Development is very effortless and efficient"),Object(o.a)("li",{parentName:"ol"},"CASE1: Automated storybook deployment to AWS S3"),Object(o.a)("li",{parentName:"ol"},"CASE2: Support for checking the image of the changed component on Pull Request"),Object(o.a)("li",{parentName:"ol"},"CASE3: Api spec document deployment and checking on the PR"),Object(o.a)("li",{parentName:"ol"},"Conclusion: You should now enable CircleCI or other CI tools integration to your repository")))}b.isMDXComponent=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"slides",(function(){return i})),n.d(t,"fusumaProps",(function(){return s})),n.d(t,"default",(function(){return b}));var a=n(2),r=n.n(a),o=n(1);function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var i=[function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h2",null,"Using CircleCI in Frontend Development is very effortless and efficient"))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"What is CircleCI?"),Object(o.a)("p",null,"A kind of CI tools"),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},Object(o.a)("img",c({parentName:"li"},{src:"https://d3r49iyjzglexf.cloudfront.net/ja/circleci-logo-stacked-fb-2bbc2f98672809be0a4e917efde89548d5ee527dabbece4384317c540d2c3984.png",alt:"Logo of CircleCI"}))),Object(o.a)("li",{parentName:"ul"},Object(o.a)("img",c({parentName:"li"},{src:"https://cdn.worldvectorlogo.com/logos/travis-ci.svg",alt:"Logo of TravisCI"})))))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"What problems does CircleCI solve?"),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},"Manual execution of unit / e2e test"),Object(o.a)("li",{parentName:"ul"},"Manual execution of Linting"),Object(o.a)("li",{parentName:"ul"},"Manual checking of components list"),Object(o.a)("li",{parentName:"ul"},"Manual execution of deployment")),Object(o.a)("p",null,"and so on"))}],s=[{classes:"title"},{classes:"what-is-circleci"},{}],u={slides:i},p="wrapper";function b(e){var t=e.components,n=l(e,["components"]);return Object(o.a)(p,c({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.a)("h2",null,"Using CircleCI in Frontend Development is very effortless and efficient"),Object(o.a)("hr",null),Object(o.a)("h3",null,"What is CircleCI?"),Object(o.a)("p",null,"A kind of CI tools"),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},Object(o.a)("img",c({parentName:"li"},{src:"https://d3r49iyjzglexf.cloudfront.net/ja/circleci-logo-stacked-fb-2bbc2f98672809be0a4e917efde89548d5ee527dabbece4384317c540d2c3984.png",alt:"Logo of CircleCI"}))),Object(o.a)("li",{parentName:"ul"},Object(o.a)("img",c({parentName:"li"},{src:"https://cdn.worldvectorlogo.com/logos/travis-ci.svg",alt:"Logo of TravisCI"})))),Object(o.a)("hr",null),Object(o.a)("h3",null,"What problems does CircleCI solve?"),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},"Manual execution of unit / e2e test"),Object(o.a)("li",{parentName:"ul"},"Manual execution of Linting"),Object(o.a)("li",{parentName:"ul"},"Manual checking of components list"),Object(o.a)("li",{parentName:"ul"},"Manual execution of deployment")),Object(o.a)("p",null,"and so on"))}b.isMDXComponent=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"slides",(function(){return i})),n.d(t,"fusumaProps",(function(){return s})),n.d(t,"default",(function(){return b}));var a=n(2),r=n.n(a),o=n(1);function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var i=[function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h2",null,"CASE1: Automated storybook deployment to AWS S3"))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"What is Storybook?"),Object(o.a)("p",null,"A kind of ui component list management tool"),Object(o.a)("p",null,"https://storybook.grommet.io/"),Object(o.a)("iframe",{src:"https://storybook.grommet.io/?path=/story/all--all"}))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"Storybook deployment to AWS s3"),Object(o.a)("img",{src:n(10)}))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"CircleCI config"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-yaml"}),"workflows:\n  version: 2\n  setup_and_ci:\n    jobs:\n      - storybook-prod:\n          requires:\n            - lint\n            - test\n          filters:\n            branches:\n              only:\n                - master\n")))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"CircleCI config"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-yaml"}),"steps:\n  - run:\n      name: Run storybook build\n      command: yarn build-storybook\n  - run:\n      name: Install aws cli\n      command: sudo apt-get install awscli\n  - run:\n      name: upload document\n      command: |\n        aws configure set preview.cloudfront true\n        aws s3 cp ${DIRNAME} s3://${S3_BUCKET}/${CIRCLE_PROJECT_REPONAME} --recursive\n  - run:\n      name: clear cache of CloudFront\n      command: |\n        aws cloudfront create-invalidation --distribution-id ${CLOUDFRONT_DISTRIBUTION_ID} --paths /${CIRCLE_PROJECT_REPONAME}/*\n")))}],s=[{classes:"title"},{classes:"what-is-storybook"},{classes:"storybook-deploy"},{classes:"circleci-config"},{classes:"circleci-conifg"}],u={slides:i},p="wrapper";function b(e){var t=e.components,a=l(e,["components"]);return Object(o.a)(p,c({},u,a,{components:t,mdxType:"MDXLayout"}),Object(o.a)("h2",null,"CASE1: Automated storybook deployment to AWS S3"),Object(o.a)("hr",null),Object(o.a)("h3",null,"What is Storybook?"),Object(o.a)("p",null,"A kind of ui component list management tool"),Object(o.a)("p",null,"https://storybook.grommet.io/"),Object(o.a)("iframe",{src:"https://storybook.grommet.io/?path=/story/all--all"}),Object(o.a)("hr",null),Object(o.a)("h3",null,"Storybook deployment to AWS s3"),Object(o.a)("img",{src:n(10)}),Object(o.a)("hr",null),Object(o.a)("h3",null,"CircleCI config"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-yaml"}),"workflows:\n  version: 2\n  setup_and_ci:\n    jobs:\n      - storybook-prod:\n          requires:\n            - lint\n            - test\n          filters:\n            branches:\n              only:\n                - master\n")),Object(o.a)("hr",null),Object(o.a)("h3",null,"CircleCI config"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-yaml"}),"steps:\n  - run:\n      name: Run storybook build\n      command: yarn build-storybook\n  - run:\n      name: Install aws cli\n      command: sudo apt-get install awscli\n  - run:\n      name: upload document\n      command: |\n        aws configure set preview.cloudfront true\n        aws s3 cp ${DIRNAME} s3://${S3_BUCKET}/${CIRCLE_PROJECT_REPONAME} --recursive\n  - run:\n      name: clear cache of CloudFront\n      command: |\n        aws cloudfront create-invalidation --distribution-id ${CLOUDFRONT_DISTRIBUTION_ID} --paths /${CIRCLE_PROJECT_REPONAME}/*\n")))}b.isMDXComponent=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"slides",(function(){return i})),n.d(t,"fusumaProps",(function(){return s})),n.d(t,"default",(function(){return b}));var a=n(2),r=n.n(a),o=n(1);function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var i=[function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h2",null,"CASE2: support for checking the image of the changed component on Pull Request"))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"Storybook deployment to artifacts"),Object(o.a)("img",{src:n(11)}))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"Pull Request comment"),Object(o.a)("img",{src:n(12)}))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"Flow image"),Object(o.a)("ol",null,Object(o.a)("li",{parentName:"ol"},"Output the greped difference"),Object(o.a)("li",{parentName:"ol"},"Generate urls and comment based on difference"),Object(o.a)("li",{parentName:"ol"},"Post the comment to the pull request")))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"1. Output the greped difference"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-bash"}),"PULL_REQUEST_ID=$(echo $CIRCLE_PULL_REQUEST | awk -F'/' '{print $NF}')\n\nTARGET_BRANCH=$(curl \\\n  \"https://api.github.com/repos/$CIRCLE_PROJECT_USERNAME/$CIRCLE_PROJECT_REPONAME/pulls/$PULL_REQUEST_ID?access_token=$GITHUB_API_TOKEN\" \\\n  | jq -r '.base.ref')\n\ngit diff origin/${TARGET_BRANCH}...HEAD --name-only | grep 'components.*\\(vue\\|stories\\.ts\\)'\n")))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"2. Generate urls and comment based on difference"),Object(o.a)("h4",null,"Generate hirerarchy"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-ts"}),"export const generateHierarchyFromFilepath = (filePath: string): string => {\n  const re = filePath.match(\n    /.*?components\\/(.*?)\\/(index\\.vue|index\\.stories\\.ts)?$/\n  )\n  if (!re) {\n    throw new Error('Passed path is invalid')\n  }\n  return re[1]\n}\n")),Object(o.a)("p",null,"also we can use this function on the stories"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-ts"}),"import base from 'paths.macro'\nimport { generateHierarchyFromFilepath } from '~/utils'\n\nstoriesOf(generateHierarchyFromFilepath(base), module)\n  .add('foo', () => ({}))\n")))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"3. Post the comment to the pull request"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-ts"}),"const endpoint =\n  `https://api.github.com/repos/${CIRCLE_PROJECT_USERNAME}/${CIRCLE_PROJECT_REPONAME}/issues/${PULL_REQUEST_ID}/comments`\n\nawait axios.post(\n  endpoint,\n  {\n    body: comment\n  },\n  {\n    headers: {\n      Authorization: `Bearer ${GITHUB_API_TOKEN}`,\n      Accept: 'application/vnd.github.v3.html+json'\n    }\n  }\n)\n")))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"Whole Code Image"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-ts"}),"import { generateHierarchyFromFilepath } from '../utils'\n\nconst getModifiedFilesFromStdin = (): Promise<string[]>\n\nconst generateStorybookUrlFromHierarchy = (hierarchy: string): string\n\nconst generateComment = (\n  modifiedStories: { hierarchy: string; url: string }[]\n): string\n\nconst postCommentToPr = async (comment: string): Promise<void>\n\n;(async (): Promise<void> => {\n  const modifiedFiles: string[] = await getModifiedFilesFromStdin()\n\n  if (modifiedFiles.length === 0) {\n    process.exit()\n  }\n\n  const modifiedStories = modifiedFiles\n    .map(generateHierarchyFromFilepath)\n    .filter((item, index, array) => array.indexOf(item) === index)\n    .map((hierarchy) => ({\n      hierarchy,\n      url: generateStorybookUrlFromHierarchy(hierarchy)\n    }))\n\n  const comment = generateComment(modifiedStories)\n  postCommentToPr(comment)\n})()\n")))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"Reference"),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},Object(o.a)("a",c({parentName:"li"},{href:"https://qiita.com/resessh/items/38ef6492d0cf21facec8"}),"PR„Åî„Å®„Å´CI„ÅßStorybook„Çí„Éì„É´„Éâ„Åó„Å¶„Éá„Ç∂„Ç§„Éä„Éº„Å®„Ç§„É≥„Çø„É©„ÇØ„Ç∑„Éß„É≥„Åæ„Åß‰Ωú„Å£„Å¶„ÅÑ„ÅèË©±"))))}],s=[{classes:"title"},{classes:"storybook-artifacts"},{classes:"storybook-artifacts"},{classes:"storybook-artifacts"},{classes:"storybook-artifacts"},{},{classes:"storybook-artifacts"},{classes:"storybook-artifacts"},{classes:"storybook-artifacts"}],u={slides:i},p="wrapper";function b(e){var t=e.components,a=l(e,["components"]);return Object(o.a)(p,c({},u,a,{components:t,mdxType:"MDXLayout"}),Object(o.a)("h2",null,"CASE2: support for checking the image of the changed component on Pull Request"),Object(o.a)("hr",null),Object(o.a)("h3",null,"Storybook deployment to artifacts"),Object(o.a)("img",{src:n(11)}),Object(o.a)("hr",null),Object(o.a)("h3",null,"Pull Request comment"),Object(o.a)("img",{src:n(12)}),Object(o.a)("hr",null),Object(o.a)("h3",null,"Flow image"),Object(o.a)("ol",null,Object(o.a)("li",{parentName:"ol"},"Output the greped difference"),Object(o.a)("li",{parentName:"ol"},"Generate urls and comment based on difference"),Object(o.a)("li",{parentName:"ol"},"Post the comment to the pull request")),Object(o.a)("hr",null),Object(o.a)("h3",null,"1. Output the greped difference"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-bash"}),"PULL_REQUEST_ID=$(echo $CIRCLE_PULL_REQUEST | awk -F'/' '{print $NF}')\n\nTARGET_BRANCH=$(curl \\\n  \"https://api.github.com/repos/$CIRCLE_PROJECT_USERNAME/$CIRCLE_PROJECT_REPONAME/pulls/$PULL_REQUEST_ID?access_token=$GITHUB_API_TOKEN\" \\\n  | jq -r '.base.ref')\n\ngit diff origin/${TARGET_BRANCH}...HEAD --name-only | grep 'components.*\\(vue\\|stories\\.ts\\)'\n")),Object(o.a)("hr",null),Object(o.a)("h3",null,"2. Generate urls and comment based on difference"),Object(o.a)("h4",null,"Generate hirerarchy"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-ts"}),"export const generateHierarchyFromFilepath = (filePath: string): string => {\n  const re = filePath.match(\n    /.*?components\\/(.*?)\\/(index\\.vue|index\\.stories\\.ts)?$/\n  )\n  if (!re) {\n    throw new Error('Passed path is invalid')\n  }\n  return re[1]\n}\n")),Object(o.a)("p",null,"also we can use this function on the stories"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-ts"}),"import base from 'paths.macro'\nimport { generateHierarchyFromFilepath } from '~/utils'\n\nstoriesOf(generateHierarchyFromFilepath(base), module)\n  .add('foo', () => ({}))\n")),Object(o.a)("hr",null),Object(o.a)("h3",null,"3. Post the comment to the pull request"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-ts"}),"const endpoint =\n  `https://api.github.com/repos/${CIRCLE_PROJECT_USERNAME}/${CIRCLE_PROJECT_REPONAME}/issues/${PULL_REQUEST_ID}/comments`\n\nawait axios.post(\n  endpoint,\n  {\n    body: comment\n  },\n  {\n    headers: {\n      Authorization: `Bearer ${GITHUB_API_TOKEN}`,\n      Accept: 'application/vnd.github.v3.html+json'\n    }\n  }\n)\n")),Object(o.a)("hr",null),Object(o.a)("h3",null,"Whole Code Image"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-ts"}),"import { generateHierarchyFromFilepath } from '../utils'\n\nconst getModifiedFilesFromStdin = (): Promise<string[]>\n\nconst generateStorybookUrlFromHierarchy = (hierarchy: string): string\n\nconst generateComment = (\n  modifiedStories: { hierarchy: string; url: string }[]\n): string\n\nconst postCommentToPr = async (comment: string): Promise<void>\n\n;(async (): Promise<void> => {\n  const modifiedFiles: string[] = await getModifiedFilesFromStdin()\n\n  if (modifiedFiles.length === 0) {\n    process.exit()\n  }\n\n  const modifiedStories = modifiedFiles\n    .map(generateHierarchyFromFilepath)\n    .filter((item, index, array) => array.indexOf(item) === index)\n    .map((hierarchy) => ({\n      hierarchy,\n      url: generateStorybookUrlFromHierarchy(hierarchy)\n    }))\n\n  const comment = generateComment(modifiedStories)\n  postCommentToPr(comment)\n})()\n")),Object(o.a)("hr",null),Object(o.a)("h3",null,"Reference"),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},Object(o.a)("a",c({parentName:"li"},{href:"https://qiita.com/resessh/items/38ef6492d0cf21facec8"}),"PR„Åî„Å®„Å´CI„ÅßStorybook„Çí„Éì„É´„Éâ„Åó„Å¶„Éá„Ç∂„Ç§„Éä„Éº„Å®„Ç§„É≥„Çø„É©„ÇØ„Ç∑„Éß„É≥„Åæ„Åß‰Ωú„Å£„Å¶„ÅÑ„ÅèË©±"))))}b.isMDXComponent=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"slides",(function(){return i})),n.d(t,"fusumaProps",(function(){return s})),n.d(t,"default",(function(){return b}));var a=n(2),r=n.n(a),o=n(1);function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var i=[function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h2",null,"CASE3: Api spec document deployment and checking on the PR"))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"What is OpenAPI?"),Object(o.a)("blockquote",null,Object(o.a)("p",{parentName:"blockquote"},"OpenAPI Specification (formerly Swagger Specification) is an API description format for REST APIs.")))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"What problems does OpenAPI solve?"),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},"Writing document manually",Object(o.a)("ul",{parentName:"li"},Object(o.a)("li",{parentName:"ul"},"It's hard to write a table by hand"),Object(o.a)("li",{parentName:"ul"},"It's hard to write sample json by hand"))),Object(o.a)("li",{parentName:"ul"},"Inconsistent document format"),Object(o.a)("li",{parentName:"ul"},"Duplicate description")))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"The same idea as storybook deployment"),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},"Merge to master branch triggers story book deployment job to AWS S3"),Object(o.a)("li",{parentName:"ul"},"Push on branch associated with pull request triggers deployment job to artifacts")))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"How to visualize document?"),Object(o.a)("p",null,"Using ",Object(o.a)("a",c({parentName:"p"},{href:"https://swagger.io/tools/swagger-ui/"}),"Swagger UI")),Object(o.a)("iframe",{src:"https://petstore.swagger.io/?_ga=2.93052829.1075228615.1575361129-2002843474.1575361129"}))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"Preparing Swagger UI distribution files"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-yml"}),'version: 2.1\nexecutors:\n  swagger_ui:\n    docker:\n      - image: swaggerapi/swagger-ui\njobs:\n  prepare_docs:\n    steps:\n      - run:\n          name: prepare openapi docs\n          command: |\n            sed -i "s|https://petstore.swagger.io/v2/swagger.json|openapi.yml|g" /usr/share/nginx/html/index.html\n            mv /usr/share/nginx/html docs\n            cp openapi.yml docs\n')))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"‚ö†"," Point to be noted ","‚ö†"),Object(o.a)("p",null,'If the "Only build pull requests" setting is not enabled,'),Object(o.a)("p",null,"when the pull request creation timing is late,"),Object(o.a)("p",null,"the process of commenting on the pull request fails."))},function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h3",null,"If you really want to turn that setting off"),Object(o.a)("p",null,"You can refer to this article"),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},Object(o.a)("a",c({parentName:"li"},{href:"https://qiita.com/yasuhiroki/items/bddb3f51bf3439652c0c"}),"CircleCI„ÅÆOnly build pull requests„Çíoff„Å´„Åó„Å¶„ÇÇ„Éó„É´„É™„ÇØ„Ç®„Çπ„Éà„Çí‰Ωú„Å£„Åü„ÇâJob„ÇíÂÆüË°å„Åó„Åü„ÅÑ"))))}],s=[{classes:"title"},{},{},{},{classes:"openapi-deploy"},{},{},{}],u={slides:i},p="wrapper";function b(e){var t=e.components,n=l(e,["components"]);return Object(o.a)(p,c({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.a)("h2",null,"CASE3: Api spec document deployment and checking on the PR"),Object(o.a)("hr",null),Object(o.a)("h3",null,"What is OpenAPI?"),Object(o.a)("blockquote",null,Object(o.a)("p",{parentName:"blockquote"},"OpenAPI Specification (formerly Swagger Specification) is an API description format for REST APIs.")),Object(o.a)("hr",null),Object(o.a)("h3",null,"What problems does OpenAPI solve?"),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},"Writing document manually",Object(o.a)("ul",{parentName:"li"},Object(o.a)("li",{parentName:"ul"},"It's hard to write a table by hand"),Object(o.a)("li",{parentName:"ul"},"It's hard to write sample json by hand"))),Object(o.a)("li",{parentName:"ul"},"Inconsistent document format"),Object(o.a)("li",{parentName:"ul"},"Duplicate description")),Object(o.a)("hr",null),Object(o.a)("h3",null,"The same idea as storybook deployment"),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},"Merge to master branch triggers story book deployment job to AWS S3"),Object(o.a)("li",{parentName:"ul"},"Push on branch associated with pull request triggers deployment job to artifacts")),Object(o.a)("hr",null),Object(o.a)("h3",null,"How to visualize document?"),Object(o.a)("p",null,"Using ",Object(o.a)("a",c({parentName:"p"},{href:"https://swagger.io/tools/swagger-ui/"}),"Swagger UI")),Object(o.a)("iframe",{src:"https://petstore.swagger.io/?_ga=2.93052829.1075228615.1575361129-2002843474.1575361129"}),Object(o.a)("hr",null),Object(o.a)("h3",null,"Preparing Swagger UI distribution files"),Object(o.a)("pre",null,Object(o.a)("code",c({parentName:"pre"},{className:"language-yml"}),'version: 2.1\nexecutors:\n  swagger_ui:\n    docker:\n      - image: swaggerapi/swagger-ui\njobs:\n  prepare_docs:\n    steps:\n      - run:\n          name: prepare openapi docs\n          command: |\n            sed -i "s|https://petstore.swagger.io/v2/swagger.json|openapi.yml|g" /usr/share/nginx/html/index.html\n            mv /usr/share/nginx/html docs\n            cp openapi.yml docs\n')),Object(o.a)("hr",null),Object(o.a)("h3",null,"‚ö†"," Point to be noted ","‚ö†"),Object(o.a)("p",null,'If the "Only build pull requests" setting is not enabled,'),Object(o.a)("p",null,"when the pull request creation timing is late,"),Object(o.a)("p",null,"the process of commenting on the pull request fails."),Object(o.a)("hr",null),Object(o.a)("h3",null,"If you really want to turn that setting off"),Object(o.a)("p",null,"You can refer to this article"),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},Object(o.a)("a",c({parentName:"li"},{href:"https://qiita.com/yasuhiroki/items/bddb3f51bf3439652c0c"}),"CircleCI„ÅÆOnly build pull requests„Çíoff„Å´„Åó„Å¶„ÇÇ„Éó„É´„É™„ÇØ„Ç®„Çπ„Éà„Çí‰Ωú„Å£„Åü„ÇâJob„ÇíÂÆüË°å„Åó„Åü„ÅÑ"))))}b.isMDXComponent=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"slides",(function(){return i})),n.d(t,"fusumaProps",(function(){return s})),n.d(t,"default",(function(){return b}));var a=n(2),r=n.n(a),o=n(1);function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var i=[function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h2",null,"Conclusion"),Object(o.a)("p",null,"You should now enable CircleCI or other CI tools integration to your repository"),Object(o.a)("p",null,Object(o.a)("img",c({parentName:"p"},{src:"https://images.contentstack.io/v3/assets/blt300387d93dabf50e/blt20392bf5fa78edf7/5bbf935efe0adfe212184907/download",alt:"Continuos Integration & Delivery"}))),Object(o.a)("p",null,"The ",Object(o.a)("a",c({parentName:"p"},{href:"https://landscape.cncf.io/"}),"CNCF landscape for CICD tools"),"."))}],s=[{classes:"title conclusion"}],u={slides:i},p="wrapper";function b(e){var t=e.components,n=l(e,["components"]);return Object(o.a)(p,c({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.a)("h2",null,"Conclusion"),Object(o.a)("p",null,"You should now enable CircleCI or other CI tools integration to your repository"),Object(o.a)("p",null,Object(o.a)("img",c({parentName:"p"},{src:"https://images.contentstack.io/v3/assets/blt300387d93dabf50e/blt20392bf5fa78edf7/5bbf935efe0adfe212184907/download",alt:"Continuos Integration & Delivery"}))),Object(o.a)("p",null,"The ",Object(o.a)("a",c({parentName:"p"},{href:"https://landscape.cncf.io/"}),"CNCF landscape for CICD tools"),"."))}b.isMDXComponent=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"slides",(function(){return i})),n.d(t,"fusumaProps",(function(){return s})),n.d(t,"default",(function(){return b}));var a=n(2),r=n.n(a),o=n(1);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=[function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("header",{style:{borderBottom:"solid 1px",borderColor:"var(--color-yellow)",color:"var(--color-yellow)",textAlign:"left",fontSize:"xx-large"}},"At Last"),Object(o.a)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",minHeight:"70rem"}},Object(o.a)("div",{style:{flexGrow:1}},Object(o.a)("img",{src:n(13)})),Object(o.a)("div",{style:{flexGrow:1}},Object(o.a)("h2",{style:{color:"var(--color-red)",fontSize:"5.4rem"}},"We are hiring!"),Object(o.a)("div",{style:{margin:"7rem 0"}},Object(o.a)("p",null,"WEB„ÄÅ„Ç¢„Éó„É™„ÄÅ„Éï„É≠„É≥„Éà„Ç®„É≥„Éâ„Ç®„É≥„Ç∏„Éã„Ç¢„Å™„Å©Êßò„ÄÖ„Å™ËÅ∑Á®Æ„Åß„Ç®„É≥„Ç∏„Éã„Ç¢ÂãüÈõÜ‰∏≠„Åß„ÅôÔºÅ"),Object(o.a)("p",null,"„Ç´„Ç∏„É•„Ç¢„É´Èù¢Ë´áÔºà„Ç™„Éï„Ç£„ÇπË®™ÂïèÔºâÊ≠ìËøé„Åß„ÅôÔºÅ"),Object(o.a)("p",null,Object(o.a)("a",{href:"https://www.wantedly.com/projects/254221"},"WANTEDLY„ÅØ„Åì„Å°„ÇâÔºÅ"))))),Object(o.a)("div",{style:{position:"absolute",bottom:"54px",right:0,zIndex:4,padding:"0 2.4rem 0 0",background:"rgba(255,255,255,1)"}},Object(o.a)("img",{src:n(14),style:{width:"inherit"}})),Object(o.a)("footer",{style:{textAlign:"left",borderTop:"solid 1px",borderColor:"var(--color-yellow)"}},"Copyright ¬© Kakaku.com Inc. All Rights Reserved."))}],s=[{classes:"hiring"}],u={slides:i},p="wrapper";function b(e){var t=e.components,a=c(e,["components"]);return Object(o.a)(p,l({},u,a,{components:t,mdxType:"MDXLayout"}),Object(o.a)("header",{style:{borderBottom:"solid 1px",borderColor:"var(--color-yellow)",color:"var(--color-yellow)",textAlign:"left",fontSize:"xx-large"}},"At Last"),Object(o.a)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",minHeight:"70rem"}},Object(o.a)("div",{style:{flexGrow:1}},Object(o.a)("img",{src:n(13)})),Object(o.a)("div",{style:{flexGrow:1}},Object(o.a)("h2",{style:{color:"var(--color-red)",fontSize:"5.4rem"}},"We are hiring!"),Object(o.a)("div",{style:{margin:"7rem 0"}},Object(o.a)("p",null,"WEB„ÄÅ„Ç¢„Éó„É™„ÄÅ„Éï„É≠„É≥„Éà„Ç®„É≥„Éâ„Ç®„É≥„Ç∏„Éã„Ç¢„Å™„Å©Êßò„ÄÖ„Å™ËÅ∑Á®Æ„Åß„Ç®„É≥„Ç∏„Éã„Ç¢ÂãüÈõÜ‰∏≠„Åß„ÅôÔºÅ"),Object(o.a)("p",null,"„Ç´„Ç∏„É•„Ç¢„É´Èù¢Ë´áÔºà„Ç™„Éï„Ç£„ÇπË®™ÂïèÔºâÊ≠ìËøé„Åß„ÅôÔºÅ"),Object(o.a)("p",null,Object(o.a)("a",{href:"https://www.wantedly.com/projects/254221"},"WANTEDLY„ÅØ„Åì„Å°„ÇâÔºÅ"))))),Object(o.a)("div",{style:{position:"absolute",bottom:"54px",right:0,zIndex:4,padding:"0 2.4rem 0 0",background:"rgba(255,255,255,1)"}},Object(o.a)("img",{src:n(14),style:{width:"inherit"}})),Object(o.a)("footer",{style:{textAlign:"left",borderTop:"solid 1px",borderColor:"var(--color-yellow)"}},"Copyright ¬© Kakaku.com Inc. All Rights Reserved."))}b.isMDXComponent=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"slides",(function(){return i})),n.d(t,"fusumaProps",(function(){return s})),n.d(t,"default",(function(){return b}));var a=n(2),r=n.n(a),o=n(1);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=[function(e){return Object(o.a)(r.a.Fragment,null,Object(o.a)("h1",null,"Thanks for all"),Object(o.a)("br",null),Object(o.a)("div",{className:"sns-list sns-list-end"},Object(o.a)("a",{href:"https://twitter.com/azawakh_d",target:"_blank"},Object(o.a)("i",{className:"fab fa-twitter"})),Object(o.a)("a",{href:"https://github.com/azawakh",target:"_blank"},Object(o.a)("i",{className:"fab fa-github"}))))}],s=[{classes:"end",note:"Thank you for your kind attention."}],u={slides:i},p="wrapper";function b(e){var t=e.components,n=c(e,["components"]);return Object(o.a)(p,l({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.a)("h1",null,"Thanks for all"),Object(o.a)("br",null),Object(o.a)("div",{className:"sns-list sns-list-end"},Object(o.a)("a",{href:"https://twitter.com/azawakh_d",target:"_blank"},Object(o.a)("i",{className:"fab fa-twitter"})),Object(o.a)("a",{href:"https://github.com/azawakh",target:"_blank"},Object(o.a)("i",{className:"fab fa-github"}))))}b.isMDXComponent=!0},,function(e,t,n){var a=n(49);"string"==typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(3)(a,r);a.locals&&(e.exports=a.locals)},function(e,t,n){}],[[18,6,7]],[1,9]]);